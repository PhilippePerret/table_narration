<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ref</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/App.html">App</a></li>
            
                <li><a href="../classes/App.Prefs.html">App.Prefs</a></li>
            
                <li><a href="../classes/Chapter.html">Chapter</a></li>
            
                <li><a href="../classes/Collection.html">Collection</a></li>
            
                <li><a href="../classes/ColText.html">ColText</a></li>
            
                <li><a href="../classes/ContextualHelp.html">ContextualHelp</a></li>
            
                <li><a href="../classes/DICO.html">DICO</a></li>
            
                <li><a href="../classes/Fiche.html">Fiche</a></li>
            
                <li><a href="../classes/FICHES.html">FICHES</a></li>
            
                <li><a href="../classes/FILMS.html">FILMS</a></li>
            
                <li><a href="../classes/Mot.html">Mot</a></li>
            
                <li><a href="../classes/ObjetClass.html">ObjetClass</a></li>
            
                <li><a href="../classes/OBJETS.html">OBJETS</a></li>
            
                <li><a href="../classes/OBJETS.Dom.html">OBJETS.Dom</a></li>
            
                <li><a href="../classes/Page.html">Page</a></li>
            
                <li><a href="../classes/Paragraph.html">Paragraph</a></li>
            
                <li><a href="../classes/PARAGRAPHES.html">PARAGRAPHES</a></li>
            
                <li><a href="../classes/Ref.html">Ref</a></li>
            
                <li><a href="../classes/REFS.html">REFS</a></li>
            
                <li><a href="../classes/UI.html">UI</a></li>
            
                <li><a href="../classes/UI.Input.html">UI.Input</a></li>
            
                <li><a href="../classes/window.html">window</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/app.html">app</a></li>
            
                <li><a href="../modules/app-prefs.html">app-prefs</a></li>
            
                <li><a href="../modules/Chapter.html">Chapter</a></li>
            
                <li><a href="../modules/Collection.html">Collection</a></li>
            
                <li><a href="../modules/ColText.html">ColText</a></li>
            
                <li><a href="../modules/ContextualHelp.html">ContextualHelp</a></li>
            
                <li><a href="../modules/Data.html">Data</a></li>
            
                <li><a href="../modules/data.html">data</a></li>
            
                <li><a href="../modules/Debug.html">Debug</a></li>
            
                <li><a href="../modules/DICO.html">DICO</a></li>
            
                <li><a href="../modules/DICO.js.html">DICO.js</a></li>
            
                <li><a href="../modules/Dom.html">Dom</a></li>
            
                <li><a href="../modules/dom.html">dom</a></li>
            
                <li><a href="../modules/Edition.html">Edition</a></li>
            
                <li><a href="../modules/edition.collection.js.html">edition.collection.js</a></li>
            
                <li><a href="../modules/Fiche.html">Fiche</a></li>
            
                <li><a href="../modules/fiche_data.html">fiche_data</a></li>
            
                <li><a href="../modules/fiche_dom.html">fiche_dom</a></li>
            
                <li><a href="../modules/FICHES.html">FICHES</a></li>
            
                <li><a href="../modules/FilmClass.html">FilmClass</a></li>
            
                <li><a href="../modules/FILMS.html">FILMS</a></li>
            
                <li><a href="../modules/Input.html">Input</a></li>
            
                <li><a href="../modules/jQueryExtension.html">jQueryExtension</a></li>
            
                <li><a href="../modules/KeyboardEvents.html">KeyboardEvents</a></li>
            
                <li><a href="../modules/KeyEvents.html">KeyEvents</a></li>
            
                <li><a href="../modules/Mot.html">Mot</a></li>
            
                <li><a href="../modules/OBJET.html">OBJET</a></li>
            
                <li><a href="../modules/ObjetClass.html">ObjetClass</a></li>
            
                <li><a href="../modules/objets.html">objets</a></li>
            
                <li><a href="../modules/OBJETS.Dom.html">OBJETS.Dom</a></li>
            
                <li><a href="../modules/Page.html">Page</a></li>
            
                <li><a href="../modules/Paragraph.html">Paragraph</a></li>
            
                <li><a href="../modules/PARAGRAPHS.html">PARAGRAPHS</a></li>
            
                <li><a href="../modules/ready.js.html">ready.js</a></li>
            
                <li><a href="../modules/ref.js.html">ref.js</a></li>
            
                <li><a href="../modules/REFS.js.html">REFS.js</a></li>
            
                <li><a href="../modules/String.html">String</a></li>
            
                <li><a href="../modules/UI.html">UI</a></li>
            
                <li><a href="../modules/window.html">window</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1>Ref Class</h1>
<div class="box meta">
    

    

    
        <div class="foundat">
            Defined in: <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l6"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:6</code></a>
        </div>
    

    
        
            Module: <a href="../modules/ref.js.html">ref.js</a>
        
    

    
</div>



<div class="box intro">
    <p>Class pour une référence. Une référence est une instance qui permet de gérer
à la volée les références à d&#39;autres fiches qui sont faites dans des textes
(ou plus rarement des titres). Une référence possède une fiche-cible ({Fiche})
qui correspond à l&#39;instance {Fiche} visée par la référence (comprendre : 
“l&#39;instance {Ref} fait référence à la cible {Fiche}).</p>
<p>L&#39;instance {Ref} peut posséder également une “porteuse”, qui est la fiche dans
laquelle cette référence est insérée. Elle est définie principalement lorsque
le texte de la porteuse doit être formaté pour affichage &quot;humain&quot;.</p>
<p>L&#39;instance {Ref} est capable de gérer toutes les situations, celle où la cible
n&#39;est pas encore une fiche chargée, où la fichier porteuse de la référence
n&#39;appartient pas au même livre que la fiche-cible de référence, etc.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Bien que l&#39;instance {Ref} ne soit pas une {Fiche}, ses propriétés <code>id</code> et
<code>type</code> sont les mêmes que sa fiche-cible. Mais pour la clarté, l&#39;instance {Ref}
possède les propriétés <code>cible_id</code> et <code>cible_type</code> qui sont des alias.</li>
</ul>

</div>


    <div class="constructor">
        <h2>Constructor</h2>
        <div id="method_Ref" class="method item">
    <h3 class="name"><code>Ref</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>rid</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l6"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:6</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">rid</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>Identifiant de la référence correspondant à <code>&lt;type&gt;-&lt;id&gt;</code>
                      de la cible.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

    </div>


<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

        
            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
        
        
            <li class="api-class-tab properties"><a href="#properties">Properties</a></li>
        
        
        
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

            
                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                        
                            <li class="index-item method">
                                <a href="#method_balise_html">balise_html</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_formate">formate</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_titres_for_loaded_cible">titres_for_loaded_cible</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_titres_for_non_loaded_cible">titres_for_non_loaded_cible</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_update">update</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            

            
                <div class="index-section properties">
                    <h3>Properties</h3>

                    <ul class="index-list properties">
                        
                            <li class="index-item property">
                                <a href="#property_book">book</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_book_id">book_id</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_cible">cible</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_class">class</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_class_hors_book">class_hors_book</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_class_same_book">class_same_book</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_human_type">human_type</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_id">id</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_mark_book">mark_book</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_porteuse">porteuse</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_same_book">same_book</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_titre">titre</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_titre_cible">titre_cible</a>

                                
                                    <span class="flag static">static</span>
                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_titre_for_porteuse">titre_for_porteuse</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_titre_hors_book">titre_hors_book</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_to_balise">to_balise</a>

                                
                                
                            </li>
                        
                            <li class="index-item property">
                                <a href="#property_type">type</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            

            

            
        </div>

        
            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method_balise_html" class="method item">
    <h3 class="name"><code>balise_html</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">String</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l151"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:151</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Retourne la balise HTML pour la référence</p>
<h2 id="notes">Notes</h2>
<ul>
<li>C&#39;est une propriété complexe, l&#39;appeler sans parenthèses</li>
<li>Le titre (le contenu) de la balise doit avoir été construit avant
d&#39;appeler cette méthode</li>
</ul>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">String</span>:
                    
                    <p>La balise à écrire dans le texte.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_formate" class="method item">
    <h3 class="name"><code>formate</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>porteuse</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>default_title</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>skip_loading</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">String</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l64"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:64</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Formate la balise pour affichage</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Le formatage de la balise dépend de :<ul>
<li>Si la cible est chargée ou non</li>
<li>Si la cible appartient au même livre ou non</li>
<li>Si le chargement de la cible peut se faire ou non</li>
</ul>
</li>
</ul>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">porteuse</code>
                        <span class="type"><a href="../classes/Fiche.html" class="crosslink">Fiche</a></span>
                    

                    

                    <div class="param-description">
                        <p>La fiche qui doit recevoir la référence formatée</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">default_title</code>
                        <span class="type">Array</span>
                    

                    

                    <div class="param-description">
                        <p>Le titre par défaut contenu dans la balise.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">skip_loading</code>
                        <span class="type">Boolean</span>
                    

                    

                    <div class="param-description">
                        <pre><code>              Pour le moment, ce paramètre n&#39;est pas pris en compte : on ne
              tente jamais de charger la fiche d&#39;une référence inexistante
              pour éviter les problèmes (vu que le formatage est un flux sur)
              un ensemble de paragraphes.</code></pre>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">String</span>:
                    
                    <p>La balise formatée pour affichage.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_titres_for_loaded_cible" class="method item">
    <h3 class="name"><code>titres_for_loaded_cible</code></h3>

    
        <span class="paren">()</span>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l93"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:93</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Formatage du titre pour une cible chargée
La méthode définit les valeurs <code>titre_same_book</code> et <code>titre_hors_book</code> de
la référence</p>

    </div>

    

    

    
</div>

                
                    <div id="method_titres_for_non_loaded_cible" class="method item">
    <h3 class="name"><code>titres_for_non_loaded_cible</code></h3>

    
        <span class="paren">()</span>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l107"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:107</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Définit les titres pour une cible non chargée (simple)</p>
<h2 id="notes">Notes</h2>
<ul>
<li>La cible n&#39;étant pas chargée, on ne peut rien savoir d&#39;elle, on met
donc le même texte simple dans les deux propriétés <code>titre_same_book</code>
et <code>titre_hors_book</code>.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="method_update" class="method item">
    <h3 class="name"><code>update</code></h3>

    
        <span class="paren">()</span>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l172"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:172</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Appelée pour updater l&#39;affichage de toutes les références lorsque la
fiche-cible est chargée.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Propriété complexe =&gt; appeler sans parenthèses</li>
</ul>

    </div>

    

    

    
</div>

                
            </div>
        

        
            <div id="properties" class="api-class-tabpanel">
                <h2 class="off-left">Properties</h2>

                
                    <div id="property_book" class="property item">
    <h3 class="name"><code>book</code></h3>
    <span class="type"><a href="../classes/Fiche.html" class="crosslink">Fiche</a></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l401"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:401</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne l&#39;instance {Fiche} de la référence courante</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Pour obtenir cette information, il faut obligatoirement que
la cible de la référence soit chargée.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_book_id" class="property item">
    <h3 class="name"><code>book_id</code></h3>
    <span class="type">String | Number</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l419"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:419</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne l&#39;identifiant du livre de la référence</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Pour obtenir cette information, il faut obligatoirement que
la cible de la référence soit chargée. Donc à n&#39;utiliser que dans les
méthodes/propriétés qui traitent du cas où la cible est loaded.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_cible" class="property item">
    <h3 class="name"><code>cible</code></h3>
    <span class="type"><a href="../classes/Fiche.html" class="crosslink">Fiche</a></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l190"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:190</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Instance Fiche de la cible de la référence</p>
<h2 id="notes">Notes</h2>
<ul>
<li>WARNING: Cette propriété est mise à NULL même si l&#39;instance Fiche
existe, mais qu&#39;elle n&#39;est pas encore chargée.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_class" class="property item">
    <h3 class="name"><code>class</code></h3>
    <span class="type">String</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l302"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:302</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne la class pour la balise <code>ref</code> en tenant compte du fait que la
référence appartient ou non au même livre que la fiche porteuse contenant
la référence.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>C&#39;est une propriété complexe car la valeur est redéfini à chaque nouvelle
insertion dans le texte demandée.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_class_hors_book" class="property item">
    <h3 class="name"><code>class_hors_book</code></h3>
    <span class="type">String</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l332"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:332</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne la class pour la balise ref dans le cas d&#39;une référence qui
N&#39;appartient PAS au même livre que la porteuse.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>C&#39;est une propriété complexe qui redéfinit la valeur à chaque nouvelle
fiche porteuse (paragraphe)</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_class_same_book" class="property item">
    <h3 class="name"><code>class_same_book</code></h3>
    <span class="type">String</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l317"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:317</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne la class pour la balise ref dans le cas d&#39;une référence qui
appartient au même livre que la porteuse.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>C&#39;est une propriété complexe qui redéfinit la valeur à chaque nouvelle
fiche porteuse (paragraphe)</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_human_type" class="property item">
    <h3 class="name"><code>human_type</code></h3>
    <span class="type">String</span>

    

    

    
        <span class="flag final">final</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l385"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:385</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Type humain de la référence (par exemple &quot;livre&quot; pour le type &#39;book&#39;)</p>
<h2 id="notes">Notes</h2>
<ul>
<li>La valeur est sans capitale, pour pouvoir s&#39;insérer dans le flux du texte
ou entre parenthèses.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_id" class="property item">
    <h3 class="name"><code>id</code></h3>
    <span class="type">Number | String</span>

    

    

    
        <span class="flag final">final</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l41"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:41</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Identifiant de la cible de la référence</p>

    </div>

    

    

    
</div>

                
                    <div id="property_mark_book" class="property item">
    <h3 class="name"><code>mark_book</code></h3>
    <span class="type">String</span>

    

    

    
        <span class="flag final">final</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l256"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:256</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Marque pour le livre à ajouter dans le titre hors book (quand la cible et
la fiche porteuse n&#39;appartienne pas au même livre ou que l&#39;une des deux fiches
n&#39;est pas dans un livre)</p>

    </div>

    

    

    
</div>

                
                    <div id="property_porteuse" class="property item">
    <h3 class="name"><code>porteuse</code></h3>
    <span class="type"><a href="../classes/Fiche.html" class="crosslink">Fiche</a></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l48"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:48</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>La fiche porteuse de la référence, c&#39;est-à-dire qui la possède dans
son texte. La plupart du temps, c&#39;est un {Paragraph} de page.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Noter que cette propriété est dynamique elle change en fonction de
la référence à écrire.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_same_book" class="property item">
    <h3 class="name"><code>same_book</code></h3>
    <span class="type">Boolean</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l274"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:274</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Renvoie true si la cible de la référence appartient au même livre que la
fiche porteuse (this.porteuse).</p>
<h2 id="notes">Notes</h2>
<ul>
<li>C&#39;est une propriété complexe qui est recalculée à chaque nouvelle porteuse.</li>
<li>@rappel: this.porteuse est une instanceof {Fiche}</li>
<li>Si la cible de la référence courante n&#39;est pas encore chargée, on ne peut
pas déterminer son livre. La propriété est alors mise à false.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_titre" class="property item">
    <h3 class="name"><code>titre</code></h3>
    <span class="type">String</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l347"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:347</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Titre construit pour la référence, tel qu&#39;il apparaitra dans le texte.
Il dépend de l&#39;état de chargement de la cible de la référence et de l&#39;appartenance
ou non au même book que la porteuse.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>C&#39;est une propriété complexe car sa (re)-définition peut faire varier
toutes les balises références de la même référence.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_titre_cible" class="property item">
    <h3 class="name"><code>titre_cible</code></h3>
    <span class="type">String</span>

    

    

    

    
        <span class="flag static">static</span>
    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l226"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:226</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne le titre pour la cible</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Ce titre dépend du type de la fiche. Pour un book, on prend son titre
réel (<code>real_titre</code>), pour un paragraphe, on prend ses 50 premiers signes,
et on prend le titre normal pour les chapitres et les pages.</li>
<li>Cette propriété ne doit être utilisée que pour une fiche-cible chargée.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_titre_for_porteuse" class="property item">
    <h3 class="name"><code>titre_for_porteuse</code></h3>
    <span class="type">String</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l210"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:210</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Titre pour la fiche-porteuse (pour la composition de son texte affiché)</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Ce titre varie en fonction du fait que cible et porteuse se trouvent
ou non dans le même livre.</li>
</ul>

    </div>

    

    

    
</div>

                
                    <div id="property_titre_hors_book" class="property item">
    <h3 class="name"><code>titre_hors_book</code></h3>
    <span class="type">String</span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l368"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:368</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Propriété similaire à la précédente, mais pour une référence n&#39;appartenant
pas au livre de la porteuse.</p>

    </div>

    

    

    
</div>

                
                    <div id="property_to_balise" class="property item">
    <h3 class="name"><code>to_balise</code></h3>
    <span class="type">String</span>

    

    

    
        <span class="flag final">final</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l132"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:132</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Retourne la balise [ref:...] à écrire dans le code du texte/titre</p>

    </div>

    

    
        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <p>  jq.append(ref.to_balise)
  // Where <code>jq</code> is a DOMElement
  // And <code>ref</code> is a Ref Instance</p>

            </div>
        </div>
    

    
</div>

                
                    <div id="property_type" class="property item">
    <h3 class="name"><code>type</code></h3>
    <span class="type">String</span>

    

    

    
        <span class="flag final">final</span>
    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_Users_philippeperret_Sites_table_narration_js_Ref.js.html#l35"><code>&#x2F;Users&#x2F;philippeperret&#x2F;Sites&#x2F;table_narration&#x2F;js&#x2F;Ref.js:35</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Type de la cible de la référence</p>

    </div>

    

    

    
</div>

                
            </div>
        

        

        
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
